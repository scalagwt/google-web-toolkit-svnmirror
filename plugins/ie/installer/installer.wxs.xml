<?xml version='1.0' encoding='windows-1252'?>
<Wix
  xmlns='http://schemas.microsoft.com/wix/2006/wi'>

  <!--
    The main product to install. We generate a new GUID (*) on each
    compile to ensure that windows installer completely removes the old
    version and reinstalls the new version without complaining.
  -->
  <Product
    Name='Google Web Toolkit Developer Plugin'
    Id='*'
    UpgradeCode='9a5e649a-ec63-4c7d-99bf-75adb345e7e5'
    Language='1033'
    Codepage='1252'
    Version='1.0.0'
    Manufacturer='Google'>

    <Package
      Id='*'
      Keywords='Installer'
      Description='Google Web Toolkit Developer Plugin Installer'
      Manufacturer='Google'
      InstallerVersion='100'
      Languages='1033'
      Compressed='yes'
      SummaryCodepage='1252' />
    <Media
      Id='1'
      Cabinet='product.cab'
      EmbedCab='yes' />

    <!-- Remove old version completely when upgrading.  -->
    <Upgrade
      Id='9a5e649a-ec63-4c7d-99bf-75adb345e7e5'>
      <UpgradeVersion
        OnlyDetect='no'
        Property='PREVIOUSFOUND'
        Minimum='0.0.0'
        IncludeMinimum='yes'
        RemoveFeatures='all' />
    </Upgrade>
    <InstallExecuteSequence>
      <LaunchConditions
        After='AppSearch' />
      <RemoveExistingProducts
        After='InstallValidate' />
    </InstallExecuteSequence>

    <!-- Define the install directory. -->
    <Directory
      Id='TARGETDIR'
      Name='SourceDir'>
      <Directory
        Id='ProgramFilesFolder'
        Name='PFiles'>
        <Directory
          Id='GoogleDir'
          Name='Google'>
          <Directory
            Id='GoogleWebToolkitDir'
            Name='Google Web Toolkit'>
            <Directory
              Id='DeveloperPluginDir'
              Name='Developer Plugin'>
              <Directory
                Id='INSTALLDIR'
                Name='IE' />
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <!-- Define the features to install. -->
    <Feature
      Id='CompleteFeature'
      Display='expand'
      Level='1'
      Absent='disallow'>
      <!--
        Loaded from oophm.wxs.xml, which is generated by the build
        script.
      -->
      <ComponentGroupRef
        Id='oophmDll' />
    </Feature>

  </Product>
</Wix>
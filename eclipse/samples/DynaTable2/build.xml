<project name="dynatable2" default="build" basedir=".">
  <property name="gwt.install" location="../../../build/lib" />
  <property name="wardir" location="war" />

  <target name="javac" description="Compile project to WEB-INF/classes">
    <mkdir dir="${wardir}/WEB-INF/classes" />
    <javac srcdir="../../../samples/dynatable/src"
        destdir="${wardir}/WEB-INF/classes"
        debug="true"
        debuglevel="lines,vars,source"
        source="1.5"
        target="1.5"
        nowarn="true"
        encoding="utf-8">
      <classpath>
        <pathelement location="${gwt.install}/gwt-user.jar" />
        <pathelement location="${gwt.install}/gwt-dev-windows.jar" />
      </classpath>
    </javac>
  </target>

  <target name="deploy" description="Copy output to the war folder">
    <copy todir="${wardir}">
      <fileset dir="www/com.google.gwt.sample.dynatable.DynaTable" />
    </copy>
    <mkdir dir="${wardir}/WEB-INF/misc" />
    <copy todir="${wardir}/WEB-INF/lib" file="${gwt.install}/gwt-servlet.jar" />
    <mkdir dir="${wardir}/WEB-INF/misc" />
    <copy todir="${wardir}/WEB-INF/misc">
      <fileset dir="www/com.google.gwt.sample.dynatable.DynaTable-aux" />
    </copy>
  </target>

  <target name="gwtc" depends="javac" description="Compile to JavaScript">
    <java classname="com.google.gwt.dev.GWTCompiler" fork="yes" failonerror="true">
      <jvmarg value="-Xmx256M"/>
      <arg value="-out" />
      <arg file="www" />
      <arg value="com.google.gwt.sample.dynatable.DynaTable" />
      <classpath>
        <pathelement location="../../../samples/dynatable/src" />
        <pathelement location="${wardir}/WEB-INF/classes" />
        <pathelement location="${gwt.install}/gwt-user.jar" />
        <pathelement location="${gwt.install}/gwt-dev-windows.jar" />
      </classpath>
    </java>
  </target>

  <target name="build" depends="javac, gwtc, deploy" description="Build this project" />

  <target name="clean" description="Cleans this project's intermediate and output files">
    <delete includeemptydirs="true" failonerror="false">
      <fileset dir="${wardir}" excludes="WEB-INF/**"/>
    </delete>
    <delete dir="${wardir}/WEB-INF/classes" failonerror="false" />
    <delete dir="${wardir}/WEB-INF/misc" failonerror="false" />
    <delete dir="www" failonerror="false" />
  </target>
</project>
